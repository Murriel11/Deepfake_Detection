<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Deepfake Detection System</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Latest compiled JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>

  <link href="static/style.css" rel="stylesheet">
  
  <!-- icon tags -->
  <script src="https://kit.fontawesome.com/4ac0a800cf.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="https://unpkg.com/uppload@3.2.0/dist/uppload.css" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/uppload@3.2.0/dist/themes/light.css" crossorigin="anonymous">

<!--   <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>

   -->
</head>

<body>
  <section id="navigation">
    <div class="container-fluid">
      <!-- Nav Bar -->
      <nav class="navbar navbar-expand-lg navbar-dark">
        <a class="navbar-brand" href="">DFDetect</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ms-auto ">
            <li class="nav-item">
              <a class="nav-link" href="#main">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#details">Details</a>
            </li>
          </ul>
        </div>
      </nav>
    </div>
  </section>
  <!-- <hr class="solid"> -->
  

  <section id="main">
      <div class="row">
        <div class="col-lg-6">
          <h1 style="color: #546a7b; padding-top: 20%;">Deepfake Detection</h1>
          <h3 style="color: #62929e;">Upload an image to test for possible deepfakes</h3>
          <a class="btn btn-light btn-lg uppload-button">Get Started</a>
        </div>
        <div
          class="col-lg-6">
          <img src="static/images/img2.jpeg" class="img-fluid" alt="" id="image-output" style="display:block; width: fit-content; height: 350px; margin:0 auto;">
          <div id="result" style="display: none; margin-top: 20px;">
            <label>Prediction Result:</label>
            <textarea class="form-control" rows="2" id="output"></textarea>
          </div>
        </div>
      </div>
    </div>
  </section>
  <div class="uppload-container" style="transition: all 300ms ease 0s; opacity: 0;">
    <div class="uppload-modal">
      <section>
        <div class="uplod-active-container">
          <div class="uppload-service uppload-service--local">
            <div class="drop-area">
              <div>Drop files here</div>
              <em>or</em>
              <button class="uppload-button uppload-button--cta">
                "Select a file"
              </button>
            </div>
            <div class="alternate-input">
              <input type="file" accept="image/png, image/jpeg, image/jpg">
            </div>
          </div>
        </div>
        <footer style="display: none;" class="effects-nav"><div class="effects-tabs" style="width: 0px;"><div class="effects-tabs-flow">
      
          <input type="radio" id="uppload-effect-radio-preview" value="preview" name="uppload-effect-radio" checked="checked">
            <label for="uppload-effect-radio-preview">
              <svg aria-hidden="true" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg"><g transform="translate(1 18)" fill="#000" fill-rule="nonzero"><path d="M244 40h-29V10c0-6-5-10-10-10H10C4 0 0 4 0 10v160c0 5 4 10 10 10h29v30c0 6 4 10 9 10h195c6 0 10-4 10-10V50c0-5-4-10-9-10zm-10 136l-40-45c-4-5-11-5-15 0l-17 19-38-45c-4-5-13-5-17 0l-49 58V60h176v116zM19 160V20h176v20H49c-6 0-10 5-10 10v110H19z"></path><ellipse cx="202.5" cy="94" rx="15.5" ry="16"></ellipse></g></svg>
              <div class="effects-continue">
        <button class="effects-continue--cancel">Cancel</button>
      </div><span>Preview</span>
            </label>
          
          </div></div><div class="effects-continue">
            <button class="effects-continue--upload">Upload</button>
          </div>
        </footer>
        <!-- <footer style="display: none;" class="effects-nav">
          <div class="effects-continue">
            <button class="effects-continue--cancel">Cancel</button>
          </div>
          <div class="effects-continue">
            <button class="effects-continue--upload">Upload</button>
          </div>
        </footer> -->
      </section>
    </div>
    <div class="uppload-modal-bg">
      <button class="uppload-close" aria-label="Close">X</button>
    </div>
  </div>

  <!-- ======= Details Section ======= -->
  <section id="details" class="details">
    <div class="container">

      <div class="row content">
        <div class="col-md-12" data-aos="fade-up">
          <h2>Experimental Results</h2>
          <p>
            We have performed extensive training and hyperparameter tuning, such as comparing different EfficientNet models, number of convolution layers, weights, data augmentations, dropout rates, and regularizers. 
            In the end, the following settings give us the best results:
          </p>
          <ul>
            
            <li><i class="fa-sharp fa-solid fa-check fa-lg" style="color: #a99985;"></i> Input Size: 299 x 299</li>
            <li><i class="fa-sharp fa-solid fa-check fa-lg" style="color: #a99985;"></i> Batch Size: 32</li>
            <li><i class="fa-sharp fa-solid fa-check fa-lg" style="color: #a99985;"></i> Optimizer: Adam</li>
            <li><i class="fa-sharp fa-solid fa-check fa-lg" style="color: #a99985;"></i> Learning Rate: 0.001</li>
            <li><i class="fa-sharp fa-solid fa-check fa-lg" style="color: #a99985;"></i> Dropout Rate: 0.5 & 0.2</li>
            <li><i class="fa-sharp fa-solid fa-check fa-lg" style="color: #a99985;"></i> Epochs: 10</li>
          </ul>
          <p>
            <img src="static/images/img3.png" style="max-width: 100%;"/>
          </p>
          <ul>
            <li><i class="fa-sharp fa-solid fa-check fa-lg" style="color: #a99985;"></i> Accuracy: 72.55%</li>
            <li><i class="fa-sharp fa-solid fa-check fa-lg" style="color: #a99985;"></i> Precision: 82%</li>
            <li><i class="fa-sharp fa-solid fa-check fa-lg" style="color: #a99985;"></i> Recall: 58%</li>
            <li><i class="fa-sharp fa-solid fa-check fa-lg" style="color: #a99985;"></i> F1 Score: 75.86%</a></li>
          </ul>
        </div>
      </div>

    </div>
  </section><!-- End Details Section -->
  
  <!-- ======= Footer ======= -->
  <footer id="footer">
    <div class="container py-4">
      <div class="copyright">
        <i class="social-icon fa-brands fa-github fa-xl" aria-hidden="true"></i>
      </div>
      <div class="credits">
        Copyright Â© 2024 DFDetect
      </div>
    </div>
  </footer><!-- End Footer -->

  <!-- <a href="#" class="back-to-top"><i class="fa-solid fa-circle-chevron-up fa-lg" style="color: #a99985;"></i></i></a> -->

<!--   <script src="https://unpkg.com/uppload@2.3.0/dist/browser.js" crossorigin="anonymous"></script>
  <script>
    var uploadedFilePath = '';
    var uploader = new window.uppload_Uppload({
      lang: window.uppload_en,
      call: ".uppload-button",
      uploader: window.uppload_xhrUploader({
        endpoint: "/predict",

        responseFunction: responseText => {
          var json = JSON.parse(responseText);
          console.log(json);
          uploadedFilePath = json.img_url; // Store the file path
         
          $("#output").val(json.prediction);
          /*$("#image-output").attr("src", json.img_url);*/
         /* document.getElementById("output").value = json.prediction;*/
          /*document.getElementById("result").style.display = "block"; */
          document.getElementById("image-output").src = "";
          var randomString = Math.random().toString(36).substring(2, 15);
          var url = document.getElementById("image-output").src = uploadedFilePath + "?" + randomString;
          var html = '<span class="label label-info" style="margin-right: 10px; font-family:Montserrat; font-weight: 950; font-size: 1.3rem;color:#546a7b;">Prediction Results</span>';
          html += '<div class="row">'
          html += '<div class="col-lg-3">'

          html += '<img src="' + url + '" style="width: 80px; margin: 10px;"/>';
          
          html += '</div>';
          html += '<div class="col-lg-9" style="margin: auto;">';
          if (json.prediction > 0.5) {
            html += '<div class="custom-progress-bar red"><span style="width: ' + ((json.prediction) * 100).toFixed(0) + '%"></span><div class="custom-progress-text">' + ((json.prediction) * 100).toFixed(2) + '%</div></div>';
          } 
          else {
            html += '<div class="custom-progress-bar green"><span style="width: ' + ((1 - json.prediction) * 100).toFixed(0) + '%"></span><div class="custom-progress-text">' + ((1 - json.prediction) * 100).toFixed(2) + '%</div></div>';
          } 
          /*html += '<div class="custom-progress-bar ' + (json.result === 'Deepfake Image' ? 'red' : 'green') + '"><span style="width: ' + (json.probability * 100).toFixed(0) + '%"></span><div class="custom-progress-text">' + (json.probability * 100).toFixed(2) + '%</div></div>'; */
          html += '</div>';
          html += '<p style="margin-top: 10px; font-family:Montserrat; font-weight: 950; font-size: 1.3rem;color:#546a7b;">The uploaded image is ' + json.result + '</p>';  // Add the result text here
          html += '</div>';

          
          /*var newImageUrl = document.getElementById("img").src = uploadedFilePath + "?" + randomString;*/
          var result_div = document.getElementById('result');
          result_div.innerHTML = html;
          result_div.style.display = "block";

          
          
        
          
        }
      
      })
      
    });
     -->
<!--   <script src="https://unpkg.com/uppload@3.2.0/dist/browser.js" crossorigin="anonymous"></script> -->
   <script src="https://unpkg.com/browse/uppload@3.2.0/dist/uppload.js"></script>
<script>
  var uploadedFilePath = '';
  var uploader = new window.uppload_Uppload({
    lang: window.uppload_en,
    call: ".uppload-button",
    uploader: window.uppload_xhrUploader({
      endpoint: "/predict",

      responseFunction: responseText => {
        let json;
        try {
          json = JSON.parse(responseText);
        } catch (e) {
          console.error("Could not parse JSON!", e);
          console.error("Response received:", responseText);
          return; // Exit the function if JSON parsing fails
        }
        
        // console.log(json);
        uploadedFilePath = json.img_url; // Store the file path
       
        $("#output").val(json.prediction);
        document.getElementById("image-output").src = "";
        var randomString = Math.random().toString(36).substring(2, 15);
        var url = document.getElementById("image-output").src = uploadedFilePath + "?" + randomString;
        
        var html = '<span class="label label-info" style="margin-right: 10px; font-family:Montserrat; font-weight: 950; font-size: 1.3rem;color:#546a7b;">Prediction Results</span>';
        html += '<div class="row">';
        html += '<div class="col-lg-3">';
        html += '<img src="' + url + '" style="width: 80px; margin: 10px;"/>';
        html += '</div>';
        html += '<div class="col-lg-9" style="margin: auto;">';
        
        if (json.prediction > 0.5) {
          html += '<div class="custom-progress-bar red"><span style="width: ' + ((json.prediction) * 100).toFixed(0) + '%"></span><div class="custom-progress-text">' + ((json.prediction) * 100).toFixed(2) + '%</div></div>';
        } else {
          html += '<div class="custom-progress-bar green"><span style="width: ' + ((1 - json.prediction) * 100).toFixed(0) + '%"></span><div class="custom-progress-text">' + ((1 - json.prediction) * 100).toFixed(2) + '%</div></div>';
        }
        
        html += '</div>';
        html += '<p style="margin-top: 10px; font-family:Montserrat; font-weight: 950; font-size: 1.3rem;color:#546a7b;">The uploaded image is ' + json.result + '</p>';  // Add the result text here
        html += '</div>';

        var result_div = document.getElementById('result');
        result_div.innerHTML = html;
        result_div.style.display = "block";
      }
    })
  });

  
    uploader.use(
      new window.uppload_Local({
        mimeTypes: ["image/png", "image/jpeg", "image/jpg"],
        maxFileSize: 200000000000
      })
    );
  
    uploader.use(new window.uppload_Preview())

    // Handle the "Upload Another Image" button click
 /* $(document).on('click', '.uppload-button', function() {
    if (uploadedFilePath) {
      $.ajax({
        url: '/delete-image',
        type: 'POST',
        data: JSON.stringify({ file_path: uploadedFilePath }),
        contentType: 'application/json',
      });
    }
  });*/

    
    
  </script>



</body>

</html>














